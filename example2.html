<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!-- ApexCharts 라이브러리 -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>
<body>
  <!-- 차트를 표시할 영역 -->
  <div id="chart"></div>

  <script>
    // 301.json에서 데이터 불러오기
    fetch('301.json')
      .then(response => response.json())  // JSON 형태로 변환
      .then(jsonData => {
        // ApexCharts에서 요구하는 형태 [x축(시간), y축(수치)]로 변환
        const seriesData = jsonData.map(item => {
          // x: 날짜/시간, y: 값
          return [ item.time, item.supply ];
        });

        // ApexCharts 옵션 설정
        const options = {
          chart: {
            type: 'line',     // 라인 차트
            height: 450       // 차트 높이
          },
          series: [
            {
              name: 'Issued Supply',
              data: seriesData
            }
          ],
          xaxis: {
            type: 'datetime'  // x축을 시간축으로 설정
          },
          yaxis: {
            title: {
              text: 'Supply'
            }
          },
          title: {
            text: 'Issued Supply Over Time',
            align: 'center'
          }
        };

        // 차트 생성 및 렌더링
        const chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
      })
      .catch(error => {
        console.error("JSON 데이터를 불러오는 중 오류 발생:", error);
      });
  </script>
</body>
</html>
